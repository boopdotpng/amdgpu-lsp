; Compact RDNA ISA test file for LSP functionality
; Exercises syntax highlighting, hover, goto-branch, and diagnostics

; === Basic scalar + vector ===
start:
  s_mov_b32       s0, 0x3f800000          ; 1.0f
  s_mov_b32       s1, -1                  ; negative literal
  s_mov_b64       s[2:3], 0x123456789ABCDEF0
  v_mov_b32       v0, s0
  v_mov_b32       v1, 1.25
  v_add_f32       v2, v0, v1
  v_cmp_eq_f32    vcc, v0, v1
  v_cndmask_b32   v3, v0, v1, vcc

; === Memory + LDS ===
  buffer_load_dword   v4, v0, s[0:3], s4
  buffer_store_dword  v4, v0, s[0:3], s4
  global_load_dword   v5, v[2:3], off
  global_store_dword  v[2:3], v5, off
  ds_read_b32         v6, v0
  ds_write_b32        v0, v6

; === Special registers ===
  s_mov_b32       m0, 0
  s_mov_b64       exec, 0
  s_mov_b64       vcc, -1
  v_mov_b32       v7, exec_lo
  v_mov_b32       v8, exec 
  v_mov_b32       v9, vcc_lo
  v_mov_b32       v10, vcc_hi
  v_mov_b32_e64   v11, null

; === Control flow + labels (goto-branch targets) ===
  s_add_u32       s10, s10, 1
  s_cmp_lt_u32    s10, 4
  s_cbranch_scc1  loop
  s_cbranch_scc1 4
  s_branch        done
  v_ashrrev_i32 

loop:
  v_add_u32       v12, v12, 1
  s_cbranch_scc1  loop

done:
  s_waitcnt       vmcnt(0) & lgkmcnt(0)
  s_endpgm


edge_cases:
; === Edge cases ===
  v_mov_b32       v[0:3], v0              ; register range
  s_mov_b32       s[20:22], s1            ; scalar range
  v_add_f32	v13,	v1,	v2                 ; tabs
  s_mov_b32       s99, 0xFFFFFFFF          ; max 32-bit literal
  v_mov_b32       v14, -2.5e-3            ; scientific notation

diagnostics :
; === Intentional diagnostics ===
  s_branch        missing_label           ; undefined label
  s_mov_b32       s_bad, 0                ; invalid register
  v_add_f32       v15, v1                 ; missing operand
  s_endpgm

bad_inputs:
  s_endpgm
  v_add_f32 4 4 4